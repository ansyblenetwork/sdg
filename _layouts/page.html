<!DOCTYPE html>
<html>
	<head>
		{% if page.title %}			
			<title>{{ page.title }} | Soli Deo gloria</title>
		{% else %}
			<title>Soli Deo gloria</title>
		{% endif %}
		<link rel="stylesheet" type="text/css" href="{{ "main.css" | relative_url }}">
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">	
   		{% seo %}
	</head>
	
	<body>	
		<div class="outersidebar">
		<div class="sidebar">
		<div class="rpanel" style="flex-grow: 1; position:relative; min-width:250px;" id="accountPanel">
			<h2><a href="{{ "" | absolute_url }}">Soli Deo gloria</a></h2>
			<div style="margin-bottom:15px" class="date-format" style="padding-bottom:15px">&raquo;&nbsp;Music composition for the classically trained pianist</div>
			<ul style="overflow:auto;">
				{% for post in site.posts %}					
					{% if page.title == post.title %}	
						<li id="specialPost" style="background-color:#f4f4f4">&raquo;&nbsp;<span class="date-format">{{ post.date | date: "%B %-d, %Y" }}</span><br>
							{{ post.title }}</li>
					{% else %}				
						<li>&raquo;&nbsp;<span class="date-format">{{ post.date | date: "%B %-d, %Y" }}</span><br>
							<a href="{{ post.url | relative_url }}">{{ post.title }}</a></li>					
					{% endif %}
				{% endfor %}
				<br>
			</ul>
			<div class="aboutpanel">
				<a href="{{ site.posts.last.url | relative_url }}">About</a>
			</div>
		</div>
		<div class="sidebartab"></div>
		</div>
		</div>
		
		<div id="main" class="main">		
			{% if page.title %}		
				<h1>{{ page.title }}</h1>
				<div class="date-format" style="padding-bottom:15px">{{ page.date | date: "%B %-d, %Y" }}</div>
			{% endif %}
			
			<div style="margin:15px; min-height:125vh;">
			{{ content }}	
			</div>
		</div>		
		
		<script>
			var mobile = false;
			if(D('specialPost')) D('specialPost').scrollIntoView({behavior: "auto", block: "center", inline: "nearest"}); 
			if (screen.width <= 550 || screen.height <= 550) mobile = true;	
			else {				
				window.addEventListener("resize", resizeFunction);
				D("accountPanel").onclick = resizeFunction;
				function resizeFunction() { 
					var w = D('accountPanel').offsetWidth + 40;
					D("main").style.marginLeft = `${w}px`;
					setTimeout(function(){					
						var w = D('accountPanel').offsetWidth + 40;
						D("main").style.marginLeft = `${w}px`;
					}, 150);			 
				}  
			}
			
			function D(string) { return document.getElementById(string);}	
		</script>
	</body>		
</html>
